(window.webpackJsonp=window.webpackJsonp||[]).push([["components-ItdArrayForm","components-ItdTypeAhead-VueBootstrapTypeahead"],{"2a6f":function(t,e,n){"use strict";function i(t,e,n,i,o,r,a,s){var l,u,c,p="function"==typeof t?t.options:t;return e&&(p.render=e,p.staticRenderFns=n,p._compiled=!0),i&&(p.functional=!0),r&&(p._scopeId="data-v-"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},p._ssrRegister=l):o&&(l=s?function(){o.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:o),l&&(p.functional?(p._injectStyles=l,u=p.render,p.render=function(t,e){return l.call(e),u(t,e)}):(c=p.beforeCreate,p.beforeCreate=c?[].concat(c,l):[l])),{exports:t,options:p}}n.d(e,"a",(function(){return i}))},eace:function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)),i}function a(t){var e,n;for(e=1;e<arguments.length;e++)n=null!=arguments[e]?arguments[e]:{},e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l,u,c,p,d,f;n.r(e),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.GIClass,style:t.GIStyle},["tableView"===t.inputSwitch?[[t.localLink?n("b-link",{on:{click:t.click}},[t._v(" "+t._s(t.$attrs["show-text"]||(t.tableViewValue?t.tableViewDisplay:""))+" ")]):[t.localLeft?n("span",{domProps:{innerHTML:t._s(t.localLeft)}}):t._e(),n("span",{domProps:{innerHTML:t._s(t.formatter(t.tableViewValue))}}),t.localRight?n("span",{domProps:{innerHTML:t._s(t.localRight)}}):t._e()]]]:t._e(),"tableDetail"===t.inputSwitch?[[n("itd-view",{ref:"table",attrs:{"no-filter":"","no-crud":"",items:t.value,"get-fields":t.field.fields||t.input.fields,"no-qsf":"","no-download":"","no-detail-field":"","per-page-options":t.field.perPageOptions||t.input.perPageOptions,"no-reload":"","no-form":"","no-specs":"","no-pagination":t.field.noPagination||t.input.noPagination||!1,fixed:!!t.field.fixed||!!t.input.fixed}})]]:t._e(),"Input"===t.inputSwitch?[void 0,[!1!==t.input.show?n("div",{class:{"form-control":!0,"is-valid":t.input.state&&t.fullState,"is-invalid":!t.input.state||!t.fullState},staticStyle:{height:"auto"}},[t.initValForm||t.input.disabled||t.disabled?t._e():n("b-form-row",[n("b-col",[n("b-form-group",{attrs:{label:"Cantidad",horizontal:""}},[n("b-select",{staticClass:"mx-auto",attrs:{required:"",options:t.myOptions},model:{value:t.qty,callback:function(e){t.qty=e},expression:"qty"}})],1)],1)],1),n("b-form-row",[n("b-col",[n("itd-view",{ref:"table",attrs:{"no-filter":"","no-specs":"","no-sort":"","no-reload":"",stacked:!t.input.noStacked&&t.input.stacked&&t.localFields.length>5,"get-fields":t.localFields,items:t.items,count:function(){return t.localItems.length},"no-crud":t.input.readonly||t.input.disabled||t.disabled,"per-page-options":t.input.perPageOptions,"no-update":"","no-upload":"","no-qsf":"","no-download":"","no-detail-field":"","no-pagination":t.input.noPagination||!1,"no-create":!t.initValForm||t.noCreate,"create-check":function(t){return!0},"no-delete":t.noDelete||t.input.disabled||t.input.readonly||t.disabled,"delete-check":function(t){return!0},"update-check":function(t){return!0},"create-action":function(){return t.qty++},"delete-action":t.splice,"empty-text":t.$attrs["empty-text"]||" ","empty-filtered-text":t.$attrs["empty-filtered-text"]||" ","with-check":t.input.withCheck,"selectable-sync":t.input.selectableSync,"force-count":"","no-form":"",responsive:!1},scopedSlots:t._u([{key:"parsers",fn:function(e){var i=e.field,o=e.row;return[t._t("default",["count"===i.key?[t._v(t._s(o.index+1+t.perPage*(t.currentPage-1)))]:["creationDate","updateDate"].includes(i.key)?n("itd-component-functional",{attrs:{component:"Date","table-view":"",input:t.inputs[t.findIndex(t.inputs,{name:i.key})]},model:{value:o.item[i.key],callback:function(e){t.$set(o.item,i.key,e)},expression:"row.item[field.key]"}}):["creationUser","updateUser"].includes(i.key)?n("itd-simple-name",{attrs:{"table-view":"",_id:o.item[i.key],row:o,field:i,input:t.inputs[t.findIndex(t.inputs,{name:i.key})]}}):t.inputs[t.findIndex(t.inputs,{name:i.key})]&&!["_update","_delete"].includes(i.key)?n("itd-input",{attrs:{input:t.inputs[t.findIndex(t.inputs,{name:i.key})],state:t.state[o.index]&&t.state[o.index][i.key],size:"sm",extra:{value:o.item},disabled:t.input.disabled||t.disabled,readonly:t.input.readonly||t.readonly,lazy:t.lazy[t.findIndex(t.inputs,{name:i.key})]},model:{value:o.item[i.key],callback:function(e){t.$set(o.item,i.key,e)},expression:"row.item[field.key]"}}):["_update","_delete"].includes(i.key)?["_update","_delete"].includes(i.key)?n("itd-component",t._b({attrs:{component:i.component,value:o.value,row:o,"table-view":""},on:{click:function(t){return i.action(o)}}},"itd-component",i,!1),[t._v(" "+t._s(i.text)+" ")]):t._e():n("span",[t._v(" "+t._s(t._f("customFilter")(o.item[i.key],i))+" ")])])]}},t.input.caption?{key:"caption",fn:function(){return[t._t("default",[n("span",{domProps:{innerHTML:t._s(t.input.caption)}})])]},proxy:!0}:null],null,!0)})],1)],1)],1):t._e()],void 0]:t._e(),void 0],2)},u=[],c=n("7ac3"),p={$lodash:["cloneDeep","isEmpty","findIndex","isEqual"],$BVP:["FormSelectPlugin","FormGroupPlugin"],components:a({},ci(["ItdInput","ItdSimpleName"])),extends:Vue.GenericInput,props:{show:{type:Boolean,default:!0}},data:function(){var t,e=this.input.noDelete;return{link:!isEmpty(this.value),tableViewValue:!isEmpty(this.value)||0,tableViewDisplay:isEmpty(this.value)?"":this.value.length,localItems:this.value&&i(this.value)||[],qty:(null===(t=this.value)||void 0===t?void 0:t.length)||this.input.min||0,perPage:1,currentPage:1,initValForm:!0,noDelete:e,noUpdateItems:!1,GIStyle:this.tableView?{"text-align":"right"}:{}}},computed:{state:function(){var t=this;return Array.isArray(this.value)?this.value.map((function(e){var n=t.input.inputs;return Object.keys(e).reduce((function(i,o){var r,a=Object(c.getInputByName)(n,o);return a?(r=0===t.$validators.validateOne(a,e[o],null,{}).length,Object.assign(i,s({},o,r))):i}),{})})):[]},lazy:function(){return this.inputs.map((function(t){var e;return null===(e=t.lazy)||void 0===e||e}))},fullState:function(){return!this.state.some((function(t){return Object.keys(t).some((function(e){return!t[e]}))}))},totalRows:function(){return this.qty},myOptions:function(){var t=this.input,e=t.min,n=t.max;return i(Array(n-e+1).fill().map((function(t,n){return n+e})))},noCreate:function(){return!this.initValForm||this.input.noCreate||this.qty>=this.max},localFields:function(){var t=cloneDeep(this.field.fields||this.input.fields);return t.forEach((function(t){return t.noparse="true"})),this.count&&t.unshift({key:"count",label:"boolean"==typeof this.count?"Nro":this.count}),t},inputs:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.inputs)||[]},localItemsC:function(){return cloneDeep(this.localItems)}},watch:{qty:function(){var t=this.input,e=t.min,n=t.max;Number.isNaN(this.qty)&&(this.qty=0),this.qty=parseInt(this.qty),this.qty<e&&(this.qty=e),this.qty>n&&(this.qty=n),this.$refs.table&&this.$refs.table.refreshTable()},localItemsC:{handler:function(t,e){var n,o=this,r=function(t){var e=a({},t);return delete e.primaryKey,delete e.$locals,e},l=t.map(r),u=e.map(r);isEqual(l,u)||(l.length>=u.length?(n=this.input.inputs,i(l.keys()).forEach((function(t){isEqual(l[t],u[t])||(o.$set(o.state,t,Object.keys(l[t]).reduce((function(e,i){var r,a=Object(c.getInputByName)(n,i);return a?(r=0===o.$validators.validateOne(a,l[t][i],null,{}).length,Object.assign(e,s({},i,r))):e}),{})),o.input.changed=!0)})),this.noUpdateItems?this.noUpdateItems=!1:this.input.noUpdateUser||i(l.keys()).forEach((function(t){isEqual(l[t],u[t])||o.$set(o.localItems[t],"$locals",{__toUpdate:!0})})),this.$emit("input",this.localItems)):this.$emit("input",this.localItems),this.$refs.table.refreshTable())},deep:!0},value:{handler:function(t){!isEqual(this.localItems,t)&&t&&(this.localItems=cloneDeep(t)),this.qty=this.localItems.length},deep:!0}},beforeMount:function(){var t;null!=this&&null!==(t=this.input)&&void 0!==t&&t.name&&(this.initValForm=!isEmpty(this.value)||this.input.onlyCreate,this.perPage=this.input.perPageOptions[0])},mounted:function(){0},methods:{initVal:function(t){return t||[]},items:function(t){var e,n,o,r=t.currentPage,a=t.perPage,l=this.qty,u=this.localItems,p=this.input.fields,d=function(){return p.reduce((function(t,e){return Object.assign(t,s({},e.key,Object(c.getVal)(e)))}),{})},f=u.length,h=Math.min(f,l),m=Math.max(f,l),y=Math.max(l-f,0),b=new Array(y).fill().map(d);return u.splice.apply(u,[h,m].concat(i(b))),this.$emit("input",this.localItems),n=(e=(r-1)*a)+a,o=this.localItems.slice(e,n),o},findIndex:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return findIndex.apply(void 0,arguments)})),splice:function(t){var e,n=this.input.min;this.qty>n&&(e=t.index+this.perPage*(this.currentPage-1),this.noUpdateItems=!0,this.localItems.splice(e,1),this.qty--)}}},d=n("2a6f"),f=Object(d.a)(p,l,u,!1,null,null,null),e.default=f.exports}}]);